title Logins - Show de Rock em Rio

actor FÃ£ de Rock
participant Pag. Web
participant Sistema de AutenticaÃ§Ã£o
participant Sistema de Fila
participant Sistema de Venda
participant Banco de dados

FÃ£ de Rock->Pag. Web: Informa Login
activate FÃ£ de Rock
activate Pag. Web
Pag. Web->Sistema de AutenticaÃ§Ã£o: Realiza AutenticaÃ§Ã£o
activate Sistema de AutenticaÃ§Ã£o
Sistema de AutenticaÃ§Ã£o->Banco de dados: Valida InformaÃ§Ãµes de Login
activate Banco de dados

alt Sucesso
Banco de dados->Sistema de AutenticaÃ§Ã£o: Sucesso
deactivate Banco de dados
Sistema de AutenticaÃ§Ã£o->Pag. Web: Login
deactivate Sistema de AutenticaÃ§Ã£o
Pag. Web->FÃ£ de Rock: Permite prosseguir
else Falha
activate Sistema de AutenticaÃ§Ã£o
activate Banco de dados
Banco de dados->Sistema de AutenticaÃ§Ã£o: Falha
deactivate Banco de dados
Sistema de AutenticaÃ§Ã£o->Pag. Web: Falha
deactivate Sistema de AutenticaÃ§Ã£o
destroysilent Sistema de AutenticaÃ§Ã£o
Pag. Web->FÃ£ de Rock: Solicita cadastro

deactivate FÃ£ de Rock
destroysilent FÃ£ de Rock
end
activate FÃ£ de Rock
FÃ£ de Rock -> Pag. Web: Solicita ingresso
Pag. Web-->Pag. Web: Armazena SolicitaÃ§Ã£o (cart)
Pag. Web -> Sistema de Fila: Adiciona a solicitaÃ§Ã£o no final da fila
activate Sistema de Fila
Sistema de Fila-->Sistema de Fila: Salva a solicitaÃ§Ã£o na fila
deactivateafter Sistema de Fila
Sistema de Venda -> Banco de dados: Busca ingressos disponÃ­veis
activate Sistema de Venda
activate Banco de dados
Banco de dados->Sistema de Venda: Lista de Ingressos disponÃ­veis
deactivate Banco de dados
loop Enquanto houver ingressos e solicitaÃ§Ã£o na fila
  Sistema de Venda->Sistema de Fila: Pega o prÃ³ximo da fila
  activate Sistema de Fila
  Sistema de Fila->Sistema de Venda: SolicitaÃ§Ã£o do primeiro na fila
  deactivate Sistema de Fila
  Sistema de Venda-->Sistema de Venda: Verifica se hÃ¡ a quantidade de\ningressos que o cliente deseja
  alt Existe ingressos disponÃ­veis
  Sistema de Venda-->Sistema de Venda: Reserva o ingresso
  Sistema de Venda->Pag. Web: Solicita Pagamento
  Pag. Web->FÃ£ de Rock: Solicita pagamento
  FÃ£ de Rock->Pag. Web: Pagamento
  Pag. Web->Sistema de Venda: Pagamento Realizado
  Sistema de Venda->*Sistema de Pagamento: Verifica situalÃ§Ã£o do Pagamento
  activate Sistema de Pagamento
  Sistema de Pagamento->Sistema de Venda: Pagamento Realizado
  deactivate Sistema de Pagamento
  destroysilent Sistema de Pagamento
  Sistema de Venda->Banco de dados: Atualiza lista de ingressos
  activate Banco de dados
  Banco de dados->Sistema de Venda: OK
  deactivate Banco de dados
  Sistema de Venda->Pag. Web: Ingresso(s)
  Sistema de Venda->Sistema de Fila: Item Processado
  deactivate Sistema de Venda
  activate Sistema de Fila
  Sistema de Fila-->Sistema de Fila: Remove solicitaÃ§Ã£o
  deactivateafter Sistema de Fila
  Pag. Web->FÃ£ de Rock: Sucesso (FÃ£ Feliz ðŸ˜Š)
  deactivate Pag. Web
  else NÃ£o hÃ¡ ingressos
  activate Pag. Web
  activate Sistema de Venda
  Sistema de Venda->Pag. Web: Ingresso(s) IndisponÃ­veis 
  Sistema de Venda->Sistema de Fila: Item Processado
  deactivate Sistema de Venda
  activate Sistema de Fila
  Sistema de Fila-->Sistema de Fila: Remove solicitaÃ§Ã£o
  deactivateafter Sistema de Fila
  Pag. Web->FÃ£ de Rock: Sem Ingresso\n(FÃ£ Triste ðŸ¥² )
  deactivate Pag. Web
  ==END LOOP==
  end
end